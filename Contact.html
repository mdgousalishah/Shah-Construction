<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us - Shah Construction</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@700&family=Work+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <!-- Custom CSS -->
    <style>
        /* ========================================
         CSS Variables and Enhanced Design
         ========================================
         */
        :root {
            --primary-color: #FBBF24; /* Richer Gold */
            --dark-color: #1F2937; /* Rich Charcoal */
            --medium-dark-color: #374151;
            --light-color: #F9FAFB; /* Off-White */
            --white-color: #ffffff;
            --text-color: #4B5563;
            --shadow-sm: 0 1px 2px 0 rgba(0,0,0,.05);
            --shadow-md: 0 4px 6px -1px rgba(0,0,0,.1), 0 2px 4px -1px rgba(0,0,0,.06);
            --shadow-lg: 0 10px 15px -3px rgba(0,0,0,.1), 0 4px 6px -2px rgba(0,0,0,.05);
            --blueprint-bg: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23374151' fill-opacity='0.4'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Work Sans', sans-serif;
            background-color: var(--light-color);
            color: var(--text-color);
            margin: 0;
            padding-top: 75px;
            opacity: 0;
            animation: fadeIn 0.5s ease-in-out forwards;
        }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* ========================================
         Reusable Components
         ========================================
         */
        .container { max-width: 1140px; margin: 0 auto; padding: 0 1.5rem; }
        h1, h2, h3 { font-family: 'Roboto Condensed', sans-serif; color: var(--dark-color); text-transform: uppercase; }
        .section { padding: 6rem 0; overflow: hidden; }
        .section-title-container { text-align: center; margin-bottom: 4rem; }
        .section-title { font-size: 2.5rem; margin-bottom: 0.5rem; position: relative; display: inline-block; }
        .section-title::after { content: ''; position: absolute; bottom: -10px; left: 50%; transform: translateX(-50%); width: 60px; height: 4px; background-color: var(--primary-color); }
        .section-subtitle { max-width: 650px; margin: 1.5rem auto 0; line-height: 1.6; }
        
        .fade-in-section { opacity: 0; transform: translateY(20px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
        .fade-in-section.is-visible { opacity: 1; transform: translateY(0); }
        
        /* ========================================
         Header & Navigation
         ========================================
         */
        .header { background-color: rgba(31, 41, 55, 0.9); backdrop-filter: blur(10px); position: fixed; top: 0; left: 0; right: 0; z-index: 1000; box-shadow: var(--shadow-md); border-bottom: 4px solid var(--primary-color); }
        .header .container { display: flex; justify-content: space-between; align-items: center; height: 75px; }
        .logo { text-decoration: none; display: flex; align-items: center; gap: 0.75rem; }
        .logo img { height: 55px; width: 55px; display: block; border-radius: 50%; transition: transform 0.8s ease-in-out; }
        .logo:hover img { transform: rotate(360deg); }
        .logo span { font-size: 1.2rem; font-weight: 700; color: var(--white-color); font-family: 'Roboto Condensed', sans-serif; text-transform: uppercase; letter-spacing: 1px; }
        .logo .text-primary { color: var(--primary-color); }
        .main-nav { display: none; }
        .nav-link { color: var(--light-color); text-decoration: none; font-weight: 600; padding: 5px 0; border-bottom: 2px solid transparent; transition: all 0.3s ease; }
        .nav-link:hover, .nav-link.active { color: var(--primary-color); border-bottom-color: var(--primary-color); }
        #mobile-menu-button { background: none; border: none; cursor: pointer; padding: 0; }
        #mobile-menu-button svg { stroke: var(--primary-color); }
        #mobile-menu { background-color: var(--medium-dark-color); padding: 1rem 1.5rem; }
        #mobile-menu a { display: block; padding: 0.75rem 0; color: var(--light-color); text-decoration: none; font-weight: 600; }
        .hidden { display: none; }

        /* ========================================
         Page Header
         ========================================
         */
        .page-header {
            padding: 5rem 0;
            background-color: var(--dark-color);
            background-image: linear-gradient(rgba(31, 41, 55, 0.85), rgba(31, 41, 55, 0.85)), var(--blueprint-bg);
            color: var(--white-color);
            text-align: center;
        }
        .page-header h1 { color: var(--white-color); font-size: 3.5rem; }
        .page-header p { color: var(--primary-color); font-size: 1.2rem; margin-top: 0.5rem; font-family: 'Work Sans', sans-serif; text-transform: none; }
        
        /* ========================================
         Contact Page Specifics
         ========================================
         */
        .contact-options-wrapper {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
            box-shadow: var(--shadow-lg);
            background: var(--white-color);
            overflow: hidden;
        }

        .form-image-panel {
            background-image: linear-gradient(rgba(31, 41, 55, 0.8), rgba(31, 41, 55, 0.8)), url('https://images.unsplash.com/photo-1541888946425-d81bb19240f5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80');
            background-size: cover;
            background-position: center;
            color: var(--white-color);
            padding: 3rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .form-image-panel h2 {
            color: var(--white-color);
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        .form-image-panel p {
            font-size: 1.1rem;
            line-height: 1.7;
            max-width: 400px;
        }
        .contact-details-inline { margin-top: 2rem; }
        .contact-item { display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem; }
        .contact-icon { color: var(--primary-color); }
        .contact-item a, .contact-item p { color: var(--white-color); text-decoration: none; font-weight: 500; margin:0;}
        .contact-item a:hover { text-decoration: underline; }

        .contact-trigger-wrapper {
             padding: 3rem;
             display: flex;
             flex-direction: column;
             align-items: center;
             justify-content: center;
             text-align: center;
        }
         .contact-trigger-wrapper h3 {
             font-size: 2rem;
         }
         .contact-trigger-wrapper p {
             margin-bottom: 2rem;
         }

        /* ========================================
         3D Animation & Form Styles
         ========================================
         */
        #animation-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(31, 41, 55, 0.9);
            backdrop-filter: blur(8px);
            z-index: 1001;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease-in-out;
        }
        #animation-overlay.visible {
            opacity: 1;
            pointer-events: auto;
        }

        #scene-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1002;
        }

        #form-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1003;
            opacity: 0;
            transform: scale(0.8) translateY(20px);
            transition: opacity 0.8s cubic-bezier(0.165, 0.84, 0.44, 1) 0.2s, transform 0.8s cubic-bezier(0.165, 0.84, 0.44, 1) 0.2s;
            pointer-events: none;
        }
        #form-container.visible {
            opacity: 1;
            transform: scale(1) translateY(0);
            pointer-events: auto;
        }

        .form-card {
            position: relative;
            background: rgba(31, 41, 55, 0.85);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(251, 191, 36, 0.2);
            border-radius: 20px;
            padding: 40px;
            width: 100%;
            max-width: 480px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }
        .form-card > * {
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }
        #form-container.visible .form-card > *:nth-child(1) { transition-delay: 0.3s; }
        #form-container.visible .form-card > *:nth-child(2) { transition-delay: 0.4s; }
        #form-container.visible .form-card > *:nth-child(3) { transition-delay: 0.5s; }
        #form-container.visible .form-card > * {
            opacity: 1;
            transform: translateY(0);
        }

        .form-group { position: relative; margin-bottom: 2.5rem; }
        .form-input {
            width: 100%;
            padding: 10px 0;
            font-size: 1rem;
            color: var(--white-color);
            border: none;
            border-bottom: 2px solid rgba(255,255,255,0.3);
            outline: none;
            background: transparent;
            box-sizing: border-box;
        }
        .form-label {
            position: absolute;
            top: 10px;
            left: 0;
            font-size: 1rem;
            color: rgba(255,255,255,0.6);
            pointer-events: none;
            transition: 0.3s ease all;
        }
        .form-input:focus ~ .form-label,
        .form-input:valid ~ .form-label {
            top: -20px;
            font-size: 0.8rem;
            color: var(--primary-color);
        }
        .form-input:focus { border-bottom-color: var(--primary-color); }

        .close-button {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: rgba(255,255,255,0.5);
            font-size: 2rem;
            cursor: pointer;
            transition: color 0.3s, transform 0.3s;
        }
        .close-button:hover {
            color: var(--white-color);
            transform: rotate(90deg);
        }
        
        .submit-button {
            background-color: var(--primary-color);
            color: var(--dark-color);
            font-family: 'Roboto Condensed', sans-serif;
            font-size: 1.2rem;
            font-weight: 700;
            text-transform: uppercase;
            padding: 1rem 2.5rem;
            text-decoration: none;
            transition: all 0.3s ease;
            display: inline-block;
            border: 2px solid var(--primary-color);
            box-shadow: var(--shadow-md);
            cursor: pointer;
            width: auto;
        }
        .submit-button:hover {
            background-color: var(--dark-color);
            color: var(--primary-color);
            border-color: var(--primary-color);
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }
        .submit-button:active {
            transform: translateY(-1px) scale(0.98);
            box-shadow: var(--shadow-sm);
        }
        
        #map-section { padding: 0; background-color: var(--white-color); }
        #map-container { width: 100%; height: 450px; background-color: #e9ecef; }
        #map-container iframe { filter: grayscale(1) opacity(0.8); }

        /* ========================================
         Submission Pop-up
         ========================================
         */
        #popup-message {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--dark-color);
            color: var(--primary-color);
            padding: 1rem 2rem;
            border-radius: 5px;
            box-shadow: var(--shadow-lg);
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease, visibility 0.5s ease, bottom 0.5s ease;
        }
        #popup-message.show {
            opacity: 1;
            visibility: visible;
            bottom: 30px;
        }

        /* ========================================
         Footer
         ========================================
         */
        .footer { background-color: var(--medium-dark-color); color: var(--light-color); padding: 4rem 0 2rem 0; text-align: center; }
        .footer .logo { margin-bottom: 1.5rem; display: inline-flex; }
        .social-links { display: flex; justify-content: center; gap: 1.5rem; margin-bottom: 2rem; }
        .social-links a { color: var(--light-color); text-decoration: none; font-size: 1.5rem; transition: all 0.3s ease; }
        .social-links a:hover { color: var(--primary-color); transform: scale(1.2); }
        .copyright { color: #adb5bd; font-size: 0.9rem; }
        .designer-credit { font-size: 0.8rem; color: #777; margin-top: 1.5rem; }
        .designer-credit a { color: #999; text-decoration: none; }
        .designer-credit a:hover { color: var(--primary-color); }

        /* ========================================
         Responsive Media Queries
         ========================================
         */
        @media (min-width: 768px) {
            .main-nav { display: flex; gap: 2.5rem; }
            #mobile-menu-button { display: none; }
            .logo span { display: block; font-size: 1.5rem;}
        }
         @media (min-width: 992px) {
            .contact-options-wrapper {
                grid-template-columns: 1fr 1fr;
            }
        }
    </style>
</head>
<body>

    <!-- Header Section -->
    <header class="header">
        <div class="container">
            <a href="index.html" class="logo">
                <img src="images/SC Logo.jpg" alt="Shah Construction Logo">
                <span>SHAH <span class="text-primary">CONSTRUCTION</span></span>
            </a>
            <nav class="main-nav">
                <a href="index.html" class="nav-link">Home</a>
                <a href="services.html" class="nav-link">Services</a>
                <a href="projects.html" class="nav-link">Projects</a>
                <a href="about.html" class="nav-link">About Us</a>
                <a href="contact.html" class="nav-link active">Contact</a>
            </nav>
            <button id="mobile-menu-button">
                <svg width="30" height="30" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
            </button>
        </div>
        <div id="mobile-menu" class="hidden">
            <a href="index.html">Home</a>
            <a href="services.html">Services</a>
            <a href="projects.html">Projects</a>
            <a href="about.html">About Us</a>
            <a href="contact.html">Contact</a>
        </div>
    </header>

    <main>
        <!-- Page Header -->
        <header class="page-header">
            <div class="container">
                <h1>Contact Us</h1>
                <p>Let's Build Something Great Together</p>
            </div>
        </header>
        
        <!-- Contact Section -->
        <section id="contact-section" class="section">
            <div class="container">
                <div class="section-title-container">
                    <h2 class="section-title">Get In Touch</h2>
                </div>

                <div class="contact-options-wrapper fade-in-section">
                    <div class="form-image-panel">
                        <h2>Start a Conversation</h2>
                        <p>We're here to answer your questions and start planning your next project. Reach out to us directly through the details below.</p>
                        <div class="contact-details-inline">
                            <div class="contact-item">
                                <div class="contact-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16"><path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/></svg></div>
                                <p>Station Road, Chhatrapati Sambhaji Nagar, Maharashtra</p>
                            </div>
                             <div class="contact-item">
                                <div class="contact-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.28 1.465l-2.13 2.13a1.09 1.09 0 0 0-.146.255c-.03.085-.058.168-.08.251.022.082.049.16.08.242.224.423.535.845.945 1.255.41.41.832.72 1.255.945.082.03.16.058.242.08.083.022.166.05.251.08a1.09 1.09 0 0 0 .255-.146l2.13-2.13c.491-.165 1.042-.048 1.465.28l2.308 1.799c.42.329.545.922.36 1.368l-1.162 2.324c-.18.36-.52.59-.905.59-.41 0-1.002-.249-1.933-.699-1.396-.65-2.93-1.8-4.505-3.375-1.575-1.575-2.724-3.108-3.375-4.505C1.345 4.002 1.1 3.41 1.1 3c0-.385.23-.725.59-.905l2.324-1.162a1.745 1.745 0 0 1 1.368.36z"/></svg></div>
                                <p><a href="tel:+919876543210">+91 98765 43210</a></p>
                            </div>
                            <div class="contact-item">
                                <div class="contact-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16"><path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555zM0 4.697v7.104l5.803-3.558L0 4.697zM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757zm3.436-.586L16 11.801V4.697l-5.803 3.546z"/></svg></div>
                                <p><a href="mailto:contact@shahconstruction.com">contact@shahconstruction.com</a></p>
                            </div>
                        </div>
                    </div>
                    <div class="contact-trigger-wrapper">
                        <h3>Send a Digital Inquiry</h3>
                        <p>Prefer to send a message online? Click the button below to launch our animated inquiry form.</p>
                         <button id="start-animation-btn" class="submit-button">Start Animated Inquiry</button>
                    </div>
                </div>

            </div>
        </section>

        <!-- Map Section -->
        <section id="map-section" class="fade-in-section">
            <div id="map-container">
                 <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d120092.43798679639!2d75.27186194335937!3d19.884560700000004!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3bdba26f74a2267d%3A0x1d467288b5e68f3!2sChhatrapati%20Sambhaji%20Nagar%2C%20Maharashtra!5e0!3m2!1sen!2sin!4v1724771234567!5m2!1sen!2sin" width="100%" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <a href="index.html" class="logo">
                <img src="images/SC Logo.jpg" alt="Shah Construction Logo">
                <span>SHAH <span class="text-primary">CONSTRUCTION</span></span>
            </a>
            <p style="margin: 1rem 0;">Station Road, Chhatrapati Sambhaji Nagar, Maharashtra, 431001</p>
            <div class="social-links">
                <a href="#" aria-label="Facebook"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v2.385z"/></svg></a>
                <a href="#" aria-label="LinkedIn"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M4.98 3.5c0 1.381-1.11 2.5-2.48 2.5s-2.48-1.119-2.48-2.5c0-1.38 1.11-2.5 2.48-2.5s2.48 1.12 2.48 2.5zm.02 4.5h-5v16h5v-16zm7.982 0h-4.98v16h4.98v-8.396c0-2.002.88-3.368 2.91-3.368 1.59 0 2.52.88 2.52 3.368v8.396h4.98v-10.396c0-4.002-2.31-6.632-5.26-6.632-2.51 0-3.84 1.381-4.43 2.568v-2.136h-4.98z"/></svg></a>
                <a href="#" aria-label="Instagram"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.85s-.011 3.584-.069 4.85c-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07s-3.584-.012-4.85-.07c-3.252-.148-4.771-1.691-4.919-4.919-.058-1.265-.069-1.645-.069-4.85s.011-3.584.069-4.85c.149-3.225 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.85-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948s.014 3.667.072 4.947c.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072s3.667-.014 4.947-.072c4.358-.2 6.78-2.618 6.98-6.98.059-1.281.073-1.689.073-4.948s-.014-3.667-.072-4.947c-.2-4.358-2.618-6.78-6.98-6.98-1.281-.059-1.689-.073-4.948-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.162 6.162 6.162 6.162-2.759 6.162-6.162-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4s1.791-4 4-4 4 1.79 4 4-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44 1.441-.645 1.441-1.44-.645-1.44-1.441-1.44z"/></svg></a>
            </div>
            <p class="copyright">&copy; 2025 Shah Construction. All Rights Reserved.</p>
            <p class="designer-credit">Website designed by Kamel Shah</p>
        </div>
    </footer>
    
    <!-- Submission Message Pop-up -->
    <div id="popup-message">
        <p>Message sent successfully!</p>
    </div>

    <!-- ========================================
     3D Animation Container
     ========================================
     -->
    <div id="animation-overlay">
        <div id="scene-container"></div>
        <div id="form-container">
            <div class="form-card">
                 <button class="close-button" id="close-animation-btn">&times;</button>
                 <div class="text-center mb-8" style="color: var(--white-color);">
                    <h2 class="text-3xl font-bold" style="color: var(--white-color);">Project Inquiry</h2>
                    <p style="color: rgba(255,255,255,0.7); margin-top: 0.5rem;">Fill out the form to start a conversation.</p>
                </div>
                <form id="animatedContactForm">
                    <div class="form-group">
                        <input type="text" id="anim_name" class="form-input" required>
                        <label for="anim_name" class="form-label">Full Name</label>
                    </div>
                    <div class="form-group">
                        <input type="email" id="anim_email" class="form-input" required>
                        <label for="anim_email" class="form-label">Email Address</label>
                    </div>
                    <div class="form-group">
                        <input type="tel" id="anim_phone" class="form-input" required>
                        <label for="anim_phone" class="form-label">Phone Number</label>
                    </div>
                    <div class="form-group">
                        <input type="text" id="anim_subject" class="form-input" required>
                        <label for="anim_subject" class="form-label">Subject</label>
                    </div>
                    <div class="form-group" style="margin-bottom: 3rem;">
                        <input type="text" id="anim_message" class="form-input" required>
                        <label for="anim_message" class="form-label">Message</label>
                    </div>
                    <button type="submit" class="submit-button" style="width: 100%;">Send Message</button>
                </form>
            </div>
        </div>
    </div>


    <script>
        // --- Mobile Menu & Page Logic (Existing) ---
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            
            const currentPage = window.location.pathname.split('/').pop() || 'index.html';
            document.querySelectorAll('.main-nav a').forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === currentPage) {
                    link.classList.add('active');
                }
            });

            const sections = document.querySelectorAll('.fade-in-section');
            const observer = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                    }
                });
            }, { threshold: 0.1 });
            sections.forEach(section => observer.observe(section));
        });
    </script>
    
    <script type="module">
        // --- 3D Animation Logic ---
        const startBtn = document.getElementById('start-animation-btn');
        
        if (startBtn) {
            const animationOverlay = document.getElementById('animation-overlay');
            const closeBtn = document.getElementById('close-animation-btn');
            
            // Scene elements
            let scene, camera, renderer, character, briefcase, caseTop, glow, spotLight;
            let leftLeg, rightLeg, leftArm, rightArm, body;
            const clock = new THREE.Clock();
            let phase = 'idle'; // idle, walking, stopping, presenting, opening, done
            const formContainer = document.getElementById('form-container');
            
            function init() {
                scene = new THREE.Scene();
                camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
                renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
                renderer.setPixelRatio(window.devicePixelRatio);
                renderer.setSize(window.innerWidth, window.innerHeight);
                renderer.shadowMap.enabled = true;
                renderer.shadowMap.type = THREE.PCFSoftShadowMap;
                const sceneContainer = document.getElementById('scene-container');
                if (sceneContainer) {
                    sceneContainer.innerHTML = ''; // Clear previous renderer
                    sceneContainer.appendChild(renderer.domElement);
                }
                camera.position.set(0, 1.8, 8);
                camera.lookAt(0, 1, 0);

                // --- Lighting ---
                const ambientLight = new THREE.AmbientLight(0xffffff, 0.7);
                scene.add(ambientLight);
                const directionalLight = new THREE.DirectionalLight(0xffffff, 0.9);
                directionalLight.position.set(5, 10, 7.5);
                directionalLight.castShadow = true;
                directionalLight.shadow.mapSize.width = 1024;
                directionalLight.shadow.mapSize.height = 1024;
                scene.add(directionalLight);

                spotLight = new THREE.SpotLight(0xFBBF24, 4, 20, Math.PI / 4, 0.5, 2); // Using brand color
                spotLight.position.set(0, 5, 5);
                spotLight.castShadow = true;
                scene.add(spotLight);
                
                // --- Ground ---
                const groundGeometry = new THREE.PlaneGeometry(30, 30);
                const groundMaterial = new THREE.MeshStandardMaterial({ color: 0x1F2937, roughness: 0.8, metalness: 0.2 }); // Using brand color
                const ground = new THREE.Mesh(groundGeometry, groundMaterial);
                ground.rotation.x = -Math.PI / 2;
                ground.receiveShadow = true;
                scene.add(ground);
                
                // --- Character Model ---
                character = new THREE.Group();
                const bodyMaterial = new THREE.MeshStandardMaterial({ color: 0x334155 });
                const shirtMaterial = new THREE.MeshStandardMaterial({ color: 0xe2e8f0 });
                const headMaterial = new THREE.MeshStandardMaterial({ color: 0xffdbac });
                const hairMaterial = new THREE.MeshStandardMaterial({ color: 0x333333 });
                const legMaterial = new THREE.MeshStandardMaterial({ color: 0x1e293b });
                
                const bodyGeom = new THREE.CylinderGeometry(0.4, 0.3, 1.2, 16);
                body = new THREE.Mesh(bodyGeom, bodyMaterial);
                body.position.y = 0.8; body.castShadow = true;
                character.add(body);
                
                const shirtGeom = new THREE.BoxGeometry(0.3, 0.4, 0.45);
                const shirt = new THREE.Mesh(shirtGeom, shirtMaterial);
                shirt.position.y = 1.1;
                character.add(shirt);

                const headGeom = new THREE.SphereGeometry(0.3, 32, 32);
                const head = new THREE.Mesh(headGeom, headMaterial);
                head.position.y = 1.7; head.castShadow = true;
                character.add(head);

                const hairGeom = new THREE.SphereGeometry(0.32, 32, 32, 0, Math.PI * 2, 0, Math.PI / 1.8);
                const hair = new THREE.Mesh(hairGeom, hairMaterial);
                hair.position.y = 1.7;
                character.add(hair);

                const legGeom = new THREE.CylinderGeometry(0.12, 0.1, 0.8, 8);
                leftLeg = new THREE.Mesh(legGeom, legMaterial);
                leftLeg.position.set(-0.18, 0.4, 0); leftLeg.castShadow = true;
                rightLeg = new THREE.Mesh(legGeom, legMaterial);
                rightLeg.position.set(0.18, 0.4, 0); rightLeg.castShadow = true;
                character.add(leftLeg, rightLeg);
                
                const armGeom = new THREE.CylinderGeometry(0.08, 0.06, 0.9, 8);
                leftArm = new THREE.Mesh(armGeom, bodyMaterial);
                leftArm.position.set(-0.45, 1.1, 0); leftArm.rotation.z = 0.2; leftArm.castShadow = true;
                rightArm = new THREE.Mesh(armGeom, bodyMaterial);
                rightArm.position.set(0.45, 1.1, 0); rightArm.rotation.z = -0.2; rightArm.castShadow = true;
                character.add(leftArm, rightArm);
                
                character.position.x = -8;
                scene.add(character);
                
                // --- Briefcase Model ---
                briefcase = new THREE.Group();
                const caseMaterial = new THREE.MeshStandardMaterial({ color: 0x6d4c41, roughness: 0.4, metalness: 0.1 });
                const latchMaterial = new THREE.MeshStandardMaterial({ color: 0xffd700, roughness: 0.2, metalness: 0.8 });
                
                const caseBottomGeom = new THREE.BoxGeometry(0.8, 0.5, 0.25);
                const caseBottom = new THREE.Mesh(caseBottomGeom, caseMaterial);
                caseBottom.castShadow = true;
                briefcase.add(caseBottom);

                caseTop = new THREE.Group();
                const caseTopGeom = new THREE.BoxGeometry(0.8, 0.1, 0.25);
                const caseTopMesh = new THREE.Mesh(caseTopGeom, caseMaterial);
                caseTopMesh.castShadow = true;
                caseTop.add(caseTopMesh);
                
                const latchGeom = new THREE.BoxGeometry(0.1, 0.08, 0.05);
                const latch1 = new THREE.Mesh(latchGeom, latchMaterial);
                latch1.position.set(-0.25, 0, 0.13);
                const latch2 = new THREE.Mesh(latchGeom, latchMaterial);
                latch2.position.set(0.25, 0, 0.13);
                caseTop.add(latch1, latch2);
                
                caseTop.position.y = 0.3;
                briefcase.add(caseTop);
                
                const handleGeom = new THREE.TorusGeometry(0.12, 0.025, 8, 16, Math.PI);
                const handle = new THREE.Mesh(handleGeom, caseMaterial);
                handle.position.y = 0.4;
                briefcase.add(handle);

                briefcase.position.set(0, 0.25, 0);
                scene.add(briefcase);

                // --- Glow inside briefcase ---
                const glowMaterial = new THREE.SpriteMaterial({
                    map: new THREE.CanvasTexture(generateGlowTexture()),
                    blending: THREE.AdditiveBlending,
                    transparent: true,
                    opacity: 0,
                });
                glow = new THREE.Sprite(glowMaterial);
                glow.scale.set(1.5, 1.5, 1.5);
                briefcase.add(glow);

                animate();
            }

            function generateGlowTexture() {
                const canvas = document.createElement('canvas');
                canvas.width = 128; canvas.height = 128;
                const context = canvas.getContext('2d');
                const gradient = context.createRadialGradient(64, 64, 0, 64, 64, 64);
                gradient.addColorStop(0, 'rgba(251, 191, 36, 1)'); // Brand color glow
                gradient.addColorStop(1, 'rgba(251, 191, 36, 0)');
                context.fillStyle = gradient;
                context.fillRect(0, 0, 128, 128);
                return canvas;
            }

            function resetAnimationState() {
                clock.stop();
                phase = 'idle';
                character.position.set(-8, 0, 0);
                briefcase.position.set(0, 0.25, 0);
                caseTop.rotation.x = 0;
                glow.material.opacity = 0;
                rightArm.rotation.z = -0.2;
                leftArm.rotation.z = 0.2;
                camera.position.set(0, 1.8, 8);
                camera.lookAt(0, 1, 0);
                formContainer.classList.remove('visible');
            }
            
            function animate() {
                if (phase === 'idle') {
                    requestAnimationFrame(animate);
                    return;
                };

                const delta = clock.getDelta();
                const elapsedTime = clock.getElapsedTime();

                if (phase === 'walking') {
                    character.position.x += 2.5 * delta;
                    leftLeg.rotation.x = Math.sin(elapsedTime * 10) * 0.5;
                    rightLeg.rotation.x = -Math.sin(elapsedTime * 10) * 0.5;
                    leftArm.rotation.x = -Math.sin(elapsedTime * 10) * 0.3;
                    rightArm.rotation.x = Math.sin(elapsedTime * 10) * 0.3;
                    camera.position.x = character.position.x / 2;
                    camera.lookAt(character.position.x, 1, 0);
                    if (character.position.x >= -0.7) {
                        phase = 'stopping';
                        character.position.x = -0.7;
                        leftLeg.rotation.x = 0; rightLeg.rotation.x = 0;
                        leftArm.rotation.x = 0; rightArm.rotation.x = 0;
                    }
                } else if (phase !== 'idle') {
                     body.position.y = 0.8 + Math.sin(elapsedTime * 1.5) * 0.01;
                }
                
                if (phase === 'stopping') {
                    character.rotation.y += (0 - character.rotation.y) * 0.1;
                    camera.position.x += (0 - camera.position.x) * 0.05;
                    camera.lookAt(0, 1, 0);
                    if (Math.abs(character.rotation.y) < 0.01 && Math.abs(camera.position.x) < 0.01) {
                        setTimeout(() => phase = 'presenting', 300);
                    }
                }

                if (phase === 'presenting') {
                    rightArm.rotation.z += (-1.2 - rightArm.rotation.z) * 0.1;
                    leftArm.rotation.z += (1.2 - leftArm.rotation.z) * 0.1;
                    if (Math.abs(rightArm.rotation.z - (-1.2)) < 0.05) {
                        phase = 'opening';
                    }
                }
                
                if (phase === 'opening') {
                    const openAngle = -Math.PI / 1.2;
                    if (caseTop.rotation.x > openAngle) {
                        caseTop.rotation.x -= 4 * delta;
                        glow.material.opacity = (openAngle - caseTop.rotation.x) / openAngle * 0.8;
                    } else {
                        phase = 'done';
                        formContainer.classList.add('visible');
                    }
                    briefcase.position.y += 0.5 * delta;
                    briefcase.position.z += 1.5 * delta;
                    character.position.z += 1.2 * delta;
                }

                renderer.render(scene, camera);
                requestAnimationFrame(animate);
            }
            
            startBtn.addEventListener('click', () => {
                animationOverlay.classList.add('visible');
                if (phase === 'idle') {
                    clock.start();
                    phase = 'walking';
                }
            });

            closeBtn.addEventListener('click', () => {
                animationOverlay.classList.remove('visible');
                resetAnimationState();
            });

            window.addEventListener('resize', () => {
                if (!renderer || !camera) return;
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            }, false);
            
            // --- Form Submission ---
            const animatedForm = document.getElementById('animatedContactForm');
            const popupMessage = document.getElementById('popup-message');
            animatedForm.addEventListener('submit', (e) => {
                e.preventDefault();
                console.log('Form submitted!');

                animationOverlay.classList.remove('visible');
                resetAnimationState();

                popupMessage.classList.add('show');
                setTimeout(() => popupMessage.classList.remove('show'), 3000);
                
                animatedForm.reset();
            });

            init();
        }
    </script>
</body>
</html>

